import React, { useState, useMemo } from 'react';

// Dados extraídos da imagem sobre os tipos de delírios
const flashcardData = [
  {
    id: 1,
    term: 'Persecutório',
    definition: 'O paciente sente-se perseguido, alvo de fofoca entre os vizinhos, acredita que as pessoas querem enganá-lo, prejudicá-lo ou conspiram contra si.'
  },
  {
    id: 2,
    term: 'Erotomaníaco (síndrome de Clérambault)',
    definition: 'O paciente acredita que alguém, normalmente em condição de superioridade econômica ou social, como um artista famoso ou empresário, está secretamente apaixonado por ele. Acredita que fatos do cotidiano são mensagens subliminares de amor e interpreta as negativas e rejeições amorosas como confirmações codificadas de amor correspondido.'
  },
  {
    id: 3,
    term: 'De parasitose (síndrome de Ekbom)',
    definition: 'O paciente acredita que está infestado por vermes, por isso coça-se, arranha-se e, apesar de jamais encontrar qualquer parasita, está convicto de que eles estão em seu corpo.'
  },
  {
    id: 4,
    term: 'Grandeza ou megalomania',
    definition: 'O paciente acredita estar incumbido de uma missão divina, especial ou secreta. Crê que pertence à nobreza ou à realeza. Acredita ter realizado uma grande invenção que pode mudar o mundo ou torná-lo rico.'
  },
  {
    id: 5,
    term: 'Síndrome de Capgras',
    definition: 'O paciente crê que pessoas de sua família foram substituídas por sósias ou que foram trocadas por impostores.'
  },
  {
    id: 6,
    term: 'Síndrome de Fregoli',
    definition: 'O paciente acredita que um mesmo indivíduo, normalmente um familiar, disfarça-se de uma ou mais pessoas para persegui-lo ou vigiá-lo. Ou pode reconhecer um estranho como um familiar ou conhecido.'
  },
  {
    id: 7,
    term: 'Síndrome de Cotard',
    definition: 'O paciente acredita que seus órgãos estão apodrecendo ou que esteja morto.'
  },
  {
    id: 8,
    term: 'Ciumento (síndrome de Otelo)',
    definition: 'O paciente está convicto de que está sendo traído, baseando-se em pequenas "evidências". Por exemplo, um "bom dia" ou um aceno dado pela companheira para outra pessoa tornam-se provas cabais de uma traição.'
  }
];

// Componente para um único flashcard
function Flashcard({ term, definition }) {
  const [isFlipped, setIsFlipped] = useState(false);

  const handleFlip = () => {
    setIsFlipped(!isFlipped);
  };
  
  // Garante que o card desvire ao mudar de termo
  React.useEffect(() => {
    setIsFlipped(false);
  }, [term]);

  return (
    <div
      className="w-full h-80 perspective-1000 cursor-pointer"
      onClick={handleFlip}
    >
      <div
        className={`relative w-full h-full transition-transform duration-700 transform-style-3d ${isFlipped ? 'rotate-y-180' : ''}`}
      >
        {/* Frente do Card */}
        <div className="absolute w-full h-full backface-hidden flex items-center justify-center p-6 bg-white border-2 border-gray-200 rounded-2xl shadow-lg">
          <h2 className="text-2xl md:text-3xl font-bold text-center text-gray-800">{term}</h2>
        </div>
        
        {/* Verso do Card */}
        <div className="absolute w-full h-full backface-hidden rotate-y-180 flex items-center justify-center p-6 bg-teal-600 border-2 border-teal-700 rounded-2xl shadow-lg">
          <p className="text-base md:text-lg text-white text-center">{definition}</p>
        </div>
      </div>
    </div>
  );
}


// Componente principal da aplicação
export default function App() {
  const [currentIndex, setCurrentIndex] = useState(0);

  const goToPrevious = () => {
    const isFirstCard = currentIndex === 0;
    const newIndex = isFirstCard ? flashcardData.length - 1 : currentIndex - 1;
    setCurrentIndex(newIndex);
  };

  const goToNext = () => {
    const isLastCard = currentIndex === flashcardData.length - 1;
    const newIndex = isLastCard ? 0 : currentIndex + 1;
    setCurrentIndex(newIndex);
  };

  const currentCard = useMemo(() => flashcardData[currentIndex], [currentIndex]);

  return (
    <div className="min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4 font-sans">
      <div className="w-full max-w-2xl mx-auto">
        <h1 className="text-4xl font-extrabold text-center text-gray-800 mb-2">Flashcards de Psicopatologia</h1>
        <p className="text-lg text-center text-gray-600 mb-8">Tipos de Delírios</p>
        
        {/* Componente do Flashcard */}
        <Flashcard 
            key={currentCard.id}
            term={currentCard.term} 
            definition={currentCard.definition} 
        />
        
        {/* Controles de Navegação */}
        <div className="flex items-center justify-between mt-8">
          <button 
            onClick={goToPrevious}
            className="flex items-center justify-center px-6 py-3 bg-white border-2 border-gray-300 rounded-lg shadow-md hover:bg-gray-50 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"
          >
             <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 mr-2 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
            </svg>
            <span className="text-gray-700 font-semibold">Anterior</span>
          </button>
          
          <p className="text-lg font-semibold text-gray-700">
            {currentIndex + 1} / {flashcardData.length}
          </p>
          
          <button 
            onClick={goToNext}
            className="flex items-center justify-center px-6 py-3 bg-teal-600 text-white rounded-lg shadow-md hover:bg-teal-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"
          >
            <span className="font-semibold">Próximo</span>
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      </div>
       <footer className="text-center mt-12 text-gray-500 text-sm">
        <p>Clique no card para virar. Use os botões para navegar.</p>
      </footer>
    </div>
  );
}

// Estilos para a animação de virar o card
const style = document.createElement('style');
style.innerHTML = `
  .perspective-1000 { perspective: 1000px; }
  .transform-style-3d { transform-style: preserve-3d; }
  .rotate-y-180 { transform: rotateY(180deg); }
  .backface-hidden { backface-visibility: hidden; -webkit-backface-visibility: hidden; }
`;
document.head.appendChild(style);
